{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nconst _c0 = function (a1) {\n  return [\"/eventos\", a1];\n};\nfunction HomeComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"div\", 6)(3, \"h5\", 7);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 8)(6, \"b\");\n    i0.ɵɵtext(7, \"Organizador:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"b\");\n    i0.ɵɵtext(11, \"Per\\u00EDodo:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelement(13, \"br\");\n    i0.ɵɵelementStart(14, \"b\");\n    i0.ɵɵtext(15, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"a\", 9);\n    i0.ɵɵtext(18, \" Ver mais \");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const evento_r1 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(evento_r1.nome);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", evento_r1.organizadorNome, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", evento_r1.dataInicio, \" - \", evento_r1.dataFim, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", evento_r1.status, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(6, _c0, evento_r1.slug));\n  }\n}\nexport class HomeComponent {\n  constructor(fb, http) {\n    this.fb = fb;\n    this.http = http;\n    this.showModal = false;\n    this.decanatos = [];\n    this.grupos = [];\n  }\n  ngOnInit() {\n    this.inscricaoForm = this.fb.group({\n      cpf: ['', [Validators.required]],\n      nome: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      telefone: ['', Validators.required],\n      decanatoId: ['', Validators.required],\n      grupoId: ['', Validators.required]\n    });\n    this.carregarDecanatos();\n  }\n  abrirModal() {\n    this.showModal = true;\n  }\n  fecharModal() {\n    this.showModal = false;\n    this.inscricaoForm.reset();\n  }\n  carregarDecanatos() {\n    this.http.get('/api/decanatos').subscribe({\n      next: data => this.decanatos = data,\n      error: err => console.error(err)\n    });\n  }\n  carregarGrupos(event) {\n    const select = event.target;\n    if (select && select.value) {\n      const decanatoId = select.value;\n      this.http.get(`/api/decanatos/${decanatoId}/grupos`).subscribe({\n        next: data => this.grupos = data,\n        error: err => console.error(err)\n      });\n    }\n  }\n  validarCpf() {\n    const cpf = this.inscricaoForm.get('cpf')?.value;\n    if (cpf && cpf.length === 11) {\n      this.http.get(`/api/inscritos/${cpf}`).subscribe({\n        next: data => {\n          if (data) {\n            this.inscricaoForm.patchValue({\n              nome: data.nome,\n              email: data.email,\n              telefone: data.telefone,\n              decanatoId: data.decanatoId,\n              grupoId: data.grupoId\n            });\n            this.carregarGrupos(data.decanatoId);\n          }\n        },\n        error: err => {\n          console.log('CPF não encontrado, insira os dados manualmente.', err);\n        }\n      });\n    }\n  }\n  salvar() {\n    if (this.inscricaoForm.valid) {\n      this.http.post('/api/inscritos', this.inscricaoForm.value).subscribe({\n        next: () => {\n          alert('Inscrição realizada com sucesso!');\n          this.fecharModal();\n        },\n        error: err => console.error(err)\n      });\n    }\n  }\n  static {\n    this.ɵfac = function HomeComponent_Factory(t) {\n      return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.HttpClient));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: HomeComponent,\n      selectors: [[\"app-home\"]],\n      decls: 5,\n      vars: 1,\n      consts: [[1, \"container\", \"mt-4\"], [1, \"mb-4\"], [1, \"row\"], [\"class\", \"col-md-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\", \"mb-4\"], [1, \"card\", \"h-100\", \"shadow-sm\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"]],\n      template: function HomeComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"Pr\\u00F3ximos Eventos\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2);\n          i0.ɵɵtemplate(4, HomeComponent_div_4_Template, 19, 8, \"div\", 3);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngForOf\", ctx.eventos);\n        }\n      },\n      dependencies: [i3.NgForOf, i4.RouterLink],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"mappings":"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","names":["Validators","i0","HomeComponent","constructor","fb","http","ngOnInit","inscricaoForm","group","cpf","required","nome","email","telefone","decanatoId","grupoId","carregarDecanatos","abrirModal","showModal","fecharModal","reset","get","subscribe","next","data","decanatos","error","err","console","carregarGrupos","event","select","target","value","grupos","validarCpf","length","patchValue","log","salvar","valid","post","alert","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/will.i.am/git/rcc-evento-app/src/app/home/home.component.ts","/Users/will.i.am/git/rcc-evento-app/src/app/home/home.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { HttpClient } from '@angular/common/http';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html'\n})\nexport class HomeComponent implements OnInit {\n  showModal = false;\n  inscricaoForm!: FormGroup;\n  \n  decanatos: any[] = [];\n  grupos: any[] = [];\n  \n  constructor(private fb: FormBuilder, private http: HttpClient) {}\n  \n  ngOnInit() {\n    this.inscricaoForm = this.fb.group({\n      cpf: ['', [Validators.required]],\n      nome: ['', Validators.required],\n      email: ['', [Validators.required, Validators.email]],\n      telefone: ['', Validators.required],\n      decanatoId: ['', Validators.required],\n      grupoId: ['', Validators.required]\n    });\n    \n    this.carregarDecanatos();\n  }\n  \n  abrirModal() {\n    this.showModal = true;\n  }\n  \n  fecharModal() {\n    this.showModal = false;\n    this.inscricaoForm.reset();\n  }\n  \n  carregarDecanatos() {\n    this.http.get<any[]>('/api/decanatos').subscribe({\n      next: (data) => (this.decanatos = data),\n      error: (err) => console.error(err)\n    });\n  }\n  \n  carregarGrupos(event: Event) {\n    const select = event.target as HTMLSelectElement | null;\n    \n    if (select && select.value) {\n      const decanatoId = select.value;\n      \n      this.http.get<any[]>(`/api/decanatos/${decanatoId}/grupos`).subscribe({\n        next: (data) => (this.grupos = data),\n        error: (err) => console.error(err)\n      });\n    }\n  }\n  \n  validarCpf() {\n    const cpf = this.inscricaoForm.get('cpf')?.value;\n    if (cpf && cpf.length === 11) {\n      this.http.get<any>(`/api/inscritos/${cpf}`).subscribe({\n        next: (data) => {\n          if (data) {\n            this.inscricaoForm.patchValue({\n              nome: data.nome,\n              email: data.email,\n              telefone: data.telefone,\n              decanatoId: data.decanatoId,\n              grupoId: data.grupoId\n            });\n            this.carregarGrupos(data.decanatoId);\n          }\n        },\n        error: (err) => {\n          console.log('CPF não encontrado, insira os dados manualmente.', err);\n        }\n      });\n    }\n  }\n  \n  salvar() {\n    if (this.inscricaoForm.valid) {\n      this.http.post('/api/inscritos', this.inscricaoForm.value).subscribe({\n        next: () => {\n          alert('Inscrição realizada com sucesso!');\n          this.fecharModal();\n        },\n        error: (err) => console.error(err)\n      });\n    }\n  }\n}\n","<div class=\"container mt-4\">\n  <h1 class=\"mb-4\">Próximos Eventos</h1>\n\n  <div class=\"row\">\n    <div class=\"col-md-4 mb-4\" *ngFor=\"let evento of eventos\">\n      <div class=\"card h-100 shadow-sm\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ evento.nome }}</h5>\n          <p class=\"card-text\">\n            <b>Organizador:</b> {{ evento.organizadorNome }}<br />\n            <b>Período:</b> {{ evento.dataInicio }} - {{ evento.dataFim }}<br />\n            <b>Status:</b> {{ evento.status }}\n          </p>\n          <a [routerLink]=\"['/eventos', evento.slug]\" class=\"btn btn-primary\">\n            Ver mais\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}